# 프로세스 (Process)

### 프로세스란?

프로세스(Process)는 실행 중인 프로그램을 의미한다.  
단순히 디스크에 존재하는 코드 파일이 아니라, CPU가 프로그램을 실행하기 위해 필요한 모든 실행 상태의 묶음이다.

즉, 프로세스는 실행 중인 프로그램과 그 실행 과정에서 사용되거나 영향을 받은 자원들의 집합이다.

---

### 프로세스를 구성하는 요소

프로세스를 정의하기 위해 가장 중요한 것은 하드웨어 상태(machine state)이다.  
하드웨어 상태란 CPU와 메모리가 지금 이 프로그램을 어디까지, 어떻게 실행하고 있는지를 나타낸다.

- **메모리(Address Space)**

  프로세스가 접근할 수 있는 메모리 범위이다.  
  코드, 데이터, 힙, 스택 영역으로 구성된다.

  프로그램은 실행되기 전에 반드시 메모리에 적재되어야 하며, 이 주소 공간은 각 프로세스마다 독립적으로 관리된다.

- **레지스터(Register State)**

  같은 메모리를 사용하더라도 레지스터 값이 다르면 실행 상태는 완전히 달라진다.

    - PC 값이 다르면 실행 위치가 다르다
    - SP 값이 다르면 스택 구조가 달라진다

  대표적인 레지스터는 다음과 같다.

    - Program Counter (PC)
    - Instruction Pointer (IP)
    - Stack Pointer (SP)
    - Frame Pointer (FP)

- **열린 파일 목록**

  프로세스는 표준 입력, 출력, 에러를 포함한 파일 디스크립터 테이블을 가진다.  
  이를 통해 파일과 입출력 장치에 접근한다.

---

### 프로그램이 실행되면 무슨 일이 일어날까?

프로그램이 프로세스로 생성될 때 운영체제는 다음과 같은 작업을 수행한다.

1. 프로그램 코드와 정적 데이터를 메모리에 적재
2. 실행 시간 스택(Stack) 영역 할당
3. 힙(Heap) 영역 할당
4. 입출력 관련 초기화 수행
5. 프로그램 시작 지점(entry point)으로 CPU 제어권 전달

이 과정을 거쳐 프로그램은 실행 가능한 프로세스가 된다.

---

### CPU 가상화

CPU 가상화는 하나의 물리 CPU를 여러 프로세스가 동시에 실행되는 것처럼 보이게 만드는 기법이다.

운영체제는 다음 두 가지를 통해 이를 구현한다.

- 시분할(Time Sharing)
- 문맥 교환(Context Switch)

이를 통해 각 프로세스는 자신만의 CPU를 가진 것처럼 동작한다.

---

### 프로세스 상태(Process State)

프로세스는 실행 과정에서 상태를 변경한다.

- 준비(Ready): 실행 가능하지만 CPU를 기다리는 상태
- 실행(Running): CPU에서 실행 중인 상태
- 대기(Blocked): I/O 등의 이벤트를 기다리는 상태

일반적인 상태 흐름은 다음과 같다.

Ready → Running → Blocked → Ready

---

### PCB(Process Control Block)

운영체제는 각 프로세스를 관리하기 위해 PCB(Process Control Block)를 유지한다.

PCB에는 다음 정보가 저장된다.

- 프로세스 ID(PID)
- 프로세스 상태
- 레지스터 값
- 프로그램 카운터
- 메모리 정보
- 열린 파일 정보

운영체제는 PCB를 통해 프로세스를 관리하고 문맥 교환을 수행한다.

---

### 정리

- 프로세스는 실행 중인 프로그램이며 실행 상태의 묶음이다.
- 프로세스는 메모리, 레지스터, 파일 정보를 포함한다.
- CPU 가상화를 통해 여러 프로세스가 동시에 실행되는 것처럼 보인다.
- 운영체제는 PCB를 통해 프로세스를 관리한다.  
