# 스케줄링

### 스케줄링이란?

스케줄링은 여러 프로세스나 스레드 중에서 지금 CPU를 누가 사용할지 결정하는 운영체제의 정책이다.

CPU는 한 순간에 하나의 작업만 실행할 수 있기 때문에 운영체제는 계속해서 다음 결정을 반복한다.

- 지금 CPU를 누구에게 줄 것인가
- 얼마나 오래 실행하게 할 것인가
- 언제 다시 CPU를 회수할 것인가

이 결정을 수행하는 주체가 스케줄러이고 결정 기준 전체를 스케줄링 정책이라고 부른다.

---

### 스케줄링의 평가 기준

스케줄링이 잘 되었는지를 판단하기 위해 기준이 필요하다.  
대표적인 기준은 다음과 같다.

- 반환 시간  
  작업이 시스템에 도착해서 종료될 때까지 걸린 시간

- 응답 시간  
  작업이 도착해서 처음 CPU를 할당받기까지 걸린 시간

- 공정성  
  특정 작업이 CPU를 독점하지 않고 골고루 실행되는지

중요한 점은 이 기준들이 서로 충돌한다는 것이다.

응답 시간을 줄이려면 자주 전환해야 하고 반환 시간을 줄이려면 한 작업을 오래 실행하는 편이 유리하다.

그래서 스케줄링은 항상 타협의 문제다.

---

### FIFO 스케줄링

FIFO는 먼저 도착한 작업을 먼저 실행하는 방식이다.

구현이 단순하고 직관적이지만 큰 문제를 가지고 있다.

앞에 실행 시간이 긴 작업이 있으면 뒤에 있는 짧은 작업들이 모두 기다리게 된다.

이 현상을 컨보이 효과라고 부른다.

---

### SJF 스케줄링

SJF는 실행 시간이 가장 짧은 작업을 먼저 실행하는 방식이다.

모든 작업이 동시에 도착하고 실행 시간을 정확히 안다는 가정 하에서는 평균 반환 시간을 최소화하는 최적의 스케줄링이다.

하지만 현실에서는 작업이 얼마나 오래 걸릴지 미리 알 수 없다.

그래서 실제 운영체제에서는 그대로 사용하기 어렵다.

---

### STCF 스케줄링

STCF는 SJF의 선점형 버전이다.

새로운 작업이 도착하면 현재 실행 중인 작업보다 남은 시간이 짧을 경우 즉시 CPU를 빼앗아 실행한다.

반환 시간 기준으로는 매우 뛰어나지만 응답 시간은 여전히 좋지 않다.

대화형 시스템에는 적합하지 않다.

---

### 응답 시간의 중요성

시분할 시스템에서는 사용자가 입력한 뒤 빠르게 반응하는 것이 중요하다.

작업이 빨리 끝나는 것보다 처음 반응이 빠른 것이 체감 성능에 더 큰 영향을 준다.

이로 인해 응답 시간이 중요한 평가 기준으로 등장한다.

---

### Round-Robin(RR) 스케줄링

라운드 로빈은 모든 작업에 같은 길이의 타임 슬라이스를 순서대로 할당하는 방식이다.

응답 시간이 매우 좋고 공정성도 높다.

하지만 단점도 분명하다.

타임 슬라이스가 짧을수록 컨텍스트 스위치가 자주 발생하고 CPU는 실제 작업보다 관리 비용에 시간을 쓰게 된다.

반환 시간 역시 나빠진다.

---

### 스케줄링의 본질적인 충돌

SJF와 STCF는 반환 시간이 좋지만 응답 시간이 나쁘다.  
라운드 로빈은 응답 시간이 좋지만 반환 시간이 나쁘다.

두 기준을 동시에 최적화하는 것은 불가능하다.

스케줄링은 항상 절충의 문제다.

---

### 현실적인 해법 MLFQ (Multi Level Feedback Queue)

현실의 운영체제는 작업의 실행 시간을 미리 알 수 없다.

그래서 과거의 실행 패턴을 기준으로 작업의 성격을 추측하는 방식이 등장했다.

MLFQ의 핵심 아이디어는 다음과 같다.

- 처음에는 모든 작업을 짧은 작업으로 가정한다.
- CPU를 오래 쓰는 작업은 점점 우선순위를 낮춘다.
- 자주 양보하는 작업은 높은 우선순위를 유지한다.

이 방식은 대화형 작업의 응답 시간을 보장하면서 CPU 집중 작업도 완전히 굶지 않게 만든다.

완벽하지는 않지만 현실적인 균형을 잘 맞춘 스케줄링 방식이다.

_위 내용에 대해선 다음 장에서 자세히 설명하겠다._

---

### 정리

- 스케줄링은 CPU를 누구에게 줄지 결정하는 정책이다.
- 반환 시간과 응답 시간은 서로 충돌한다.
- 단순한 알고리즘은 한계가 분명하다.
- 현실의 운영체제는 적응형 스케줄링을 사용한다.
- 스케줄링에는 절대적인 정답이 없다.
